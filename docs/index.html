<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f5f5f5;
        }

        .container {
            text-align: center;
            max-width: 300px;
            margin: auto;
        }

        .button {
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            background-color: #006DAA;
            color: #ffffff;
            cursor: pointer;
        }

        .dark-mode .button {
            background-color: #57078D;
        }

        #numeric-calculator {
            display: none;
            transition: opacity 0.3s ease;
        }

        #display {
            height: 60px;
            font-size: 24px;
            background-color: #e9ecef;
            text-align: right;
            padding: 10px;
            margin-bottom: 10px;
        }

        .key {
            padding: 15px;
            margin: 5px;
            font-size: 18px;
            width: 60px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background-color: #006DAA;
            color: #ffffff;
        }

        .dark-mode .key {
            background-color: #57078D;
        }

        #keypad {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
    </style>
</head>
<body>
    <div class="container" id="standard-calculator">
        <h1>Calculadora Estándar</h1>
        <button class="button" id="switch-to-numeric">Cambiar a Calculadora Numérica</button>
        <!-- Aquí irían los controles de la calculadora estándar si existen -->
    </div>

    <div class="container" id="numeric-calculator">
        <button class="button" id="back-to-standard">Volver a Calculadora Estándar</button>
        <h1>Calculadora Numérica</h1>
        <div id="display" contenteditable="true">0</div>
        <div id="keypad">
            <button class="key">7</button>
            <button class="key">8</button>
            <button class="key">9</button>
            <button class="key operation">/</button>
            <button class="key">4</button>
            <button class="key">5</button>
            <button class="key">6</button>
            <button class="key operation">*</button>
            <button class="key">1</button>
            <button class="key">2</button>
            <button class="key">3</button>
            <button class="key operation">-</button>
            <button class="key">0</button>
            <button class="key">.</button>
            <button class="key operation">+</button>
            <button class="key operation" id="equals">=</button>
        </div>
    </div>

    <script>
        const apiUrl = "https://backendcalculadorad-production.up.railway.app/api/calculate"; // URL del backend

        // Alternar entre las calculadoras
        document.getElementById("switch-to-numeric").addEventListener("click", () => {
            document.getElementById("standard-calculator").style.display = "none";
            document.getElementById("numeric-calculator").style.display = "block";
        });

        document.getElementById("back-to-standard").addEventListener("click", () => {
            document.getElementById("numeric-calculator").style.display = "none";
            document.getElementById("standard-calculator").style.display = "block";
        });

        const display = document.getElementById("display");
        const keys = document.querySelectorAll(".key");

        keys.forEach((key) => {
            key.addEventListener("click", () => {
                const value = key.textContent;

                if (value === "=") {
                    calculateBackend(display.textContent);
                } else if (display.textContent === "0" && value !== ".") {
                    display.textContent = value;
                } else {
                    display.textContent += value;
                }
            });
        });

        // Función para calcular usando el backend
        function calculateBackend(expression) {
            fetch(apiUrl, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ expression }),
            })
                .then((response) => response.json())
                .then((data) => {
                    if (data.result !== undefined) {
                        display.textContent = data.result;
                    } else {    
                        display.textContent = "Error";
                    }
                })
                .catch(() => {
                    display.textContent = "Error";
                });
        }
    </script>
</body>
</html>


